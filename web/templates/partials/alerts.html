{# web/templates/partials/alerts.html #}
{% if messages %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const map = {
      success: { title:"Éxito",    color:"#0B3A6E" },
      error:   { title:"Error",    color:"#D32F2F" },
      danger:  { title:"Error",    color:"#D32F2F" },
      warning: { title:"Atención", color:"#F28C28" },
      info:    { title:"Info",     color:"#0B3A6E" },
    };

    {% for message in messages %}
      (function(){
        const tags = "{{ message.tags|default:'info' }}";
        const key = (tags.includes("success") && "success")
                 || ((tags.includes("error") || tags.includes("danger")) && "error")
                 || (tags.includes("warning") && "warning")
                 || "info";

        const cfg = map[key];

        iziToast.show({
          title: cfg.title,
          message: "{{ message|escapejs }}",
          position: "bottomRight",
          timeout: 2000,
          closeOnClick: true,
          progressBar: true,
          backgroundColor: "#ffffff",
          titleColor: "#111827",
          messageColor: "#374151",
          progressBarColor: cfg.color,
          iconColor: cfg.color
        });
      })();
    {% endfor %}
  });
</script>
{% endif %}
